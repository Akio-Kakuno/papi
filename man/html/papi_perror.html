<HTML><HEAD>
<TITLE>Manual Page - PAPI_perror(3)</TITLE>
<BODY background="fader-orange.gif" bgcolor="#FFFFFF" text="#000000" link="#660000" vlink="#003399" alink="#999933"><A NAME=top></A>
<!-- .\" $Id$ -->
<!-- .TH PAPI_perror 3 "October, 2000" "PAPI Programmer's Manual" "PAPI" -->
<CENTER>
<H1><HR><I>PAPI Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>PAPI_perror (3)</NOBR><HR></H1>
</CENTER>
<P>
<!-- .SH NAME -->
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
PAPI_perror, PAPI_strerror - convert PAPI error codes to strings
<P>
<!-- .SH SYNOPSIS -->
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Return Values</A><BR>
<A HREF=#4>Errors</A><BR>
<A HREF=#5>Example</A><BR>
<A HREF=#6>Author</A><BR>
<A HREF=#7>Bugs</A><BR>
<A HREF=#8>See Also</A><BR>
</BLOCKQUOTE>
<A name=9>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<!-- .B #include <papi.h> -->
<B>#include &lt;papi.h&gt;</B> <P>
<!-- .nf -->
<PRE>
<!-- .BI "int PAPI_perror(int " code ", char *" destination ", int " length ");" -->
<B>int PAPI_perror(int </B><I>code</I><B>, char *</B><I>destination</I><B>, int </B><I>length</I><B>);</B> 
<!-- .BI "char *PAPI_strerror(int " code ");" -->
<B>char *PAPI_strerror(int </B><I>code</I><B>);</B> 
<!-- .fi -->
</PRE>
<P>
<!-- .SH DESCRIPTION -->
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<!-- .B PAPI_perror() -->
<B>PAPI_perror()</B> fills the string
<!-- .I destination  -->
<I>destination</I> with the error message corresponding to the error code
<!-- .IR code . -->
<I>code</I>. The function copies length worth of the error description string
corresponding to code into destination. The resulting string is always
null terminated. If length is 0, then the string is printed on stderr.
The return value is an integer that indicates whether the call
succeeded (PAPI_OK) or failed (not PAPI_OK).
<!-- .LP -->
<P>
<!-- .I code  -->
<I>code</I> -- the error code to interpret
<!-- .LP -->
<P>
<!-- .I *destination  -->
<I>*destination</I> -- "the error message in quotes"
<!-- .LP -->
<P>
<!-- .I length  -->
<I>length</I> -- either 0 or strlen(destination)
<!-- .LP -->
<P>
<!-- .B PAPI_strerror() -->
<B>PAPI_strerror()</B> returns a pointer to the error message corresponding to the error code
<!-- .IR code . -->
<I>code</I>. If the call fails the function returns the NULL pointer.
<!-- .LP -->
<P>
<!-- .I code  -->
<I>code</I> -- an error code to interpret
<P>
<!-- .SH RETURN VALUES -->
</BLOCKQUOTE>
<A name=3>

     <H3>RETURN VALUES</H3>

</A>
<BLOCKQUOTE>
On success
<!-- .B PAPI_perror() -->
<B>PAPI_perror()</B> returns
<!-- .I "PAPI_OK." -->
<I>PAPI_OK.</I> <!-- .LP -->
<P>
On success
<!-- .B PAPI_strerror() -->
<B>PAPI_strerror()</B> returns a non-NULL pointer.
<P>
<!-- .SH ERRORS -->
</BLOCKQUOTE>
<A name=4>

     <H3>ERRORS</H3>

</A>
<BLOCKQUOTE>
<!-- .TP -->
<TABLE cellpadding=3>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_EINVAL" -->
<B>PAPI_EINVAL</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
One or more of the arguments to
<!-- .B PAPI_perror()  -->
<B>PAPI_perror()</B> is invalid.
<P>
<!-- .SH EXAMPLE -->
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>EXAMPLE</H3>

</A>
<BLOCKQUOTE>
<!-- .nf -->
<PRE>
<!-- .if t .ft CW -->
<TT>int EventSet = PAPI_NULL;
int native = 0x0;
char error_str[PAPI_MAX_STR_LEN];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if ((retval = PAPI_create_eventset(&EventSet)) != PAPI_OK)
  {
     fprintf(stderr, "PAPI error %d: %s\n",retval,PAPI_strerror(retval));
     exit(1);
  }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<P>
/* Add Total Instructions Executed to our EventSet */
<P>
if ((retval = PAPI_add_event(&EventSet, PAPI_TOT_INS)) != PAPI_OK)
  {
     PAPI_perror(retval,error_str,PAPI_MAX_STR_LEN);
     fprintf(stderr,"PAPI_error %d: %s\n",retval,error_str);
     exit(1);
  }
<P>
/* Add native event (0xc1 on hardware counter 1) */
<P>
native = (0xc1 &lt;&lt; 8) | 1;
if ((retval = PAPI_add_event(&EventSet, native)) != PAPI_OK)
  {
     /* Dump error string directly to stderr. */
<P>
      PAPI_perror(retval,NULL,NULL);
     exit(1);
  }
<P>
/* Start counting */
<P>
if ((retval = PAPI_start(EventSet)) != PAPI_OK)
  handle_error(retval);
<!-- .if t .ft P -->
</TT><!-- .fi -->
</PRE>
<P>
<!-- .SH AUTHOR -->
</BLOCKQUOTE>
<A name=6>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
Philip J. Mucci &lt;<A HREF="mailto:mucci@cs.utk.edu">mucci@cs.utk.edu</A>&gt;
<P>
<!-- .SH BUGS -->
</BLOCKQUOTE>
<A name=7>

     <H3>BUGS</H3>

</A>
<BLOCKQUOTE>
This function has no known bugs.
<P>
<!-- .SH SEE ALSO -->
</BLOCKQUOTE>
<A name=8>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<!-- .BR PAPI_set_debug "(3), " -->
<A HREF="papi_set_debug.html">PAPI_set_debug (3)</A>, 
<!-- .BR PAPI_set_opt "(3), " PAPI_get_opt "(3), " PAPI_shutdown "(3), "  -->
<A HREF="papi_set_opt.html">PAPI_set_opt (3)</A>, 
<A HREF="papi_get_opt.html">PAPI_get_opt (3)</A>, 
<A HREF="papi_shutdown.html">PAPI_shutdown (3)</A>, 
The PAPI Web Site:
<!-- .B http://icl.cs.utk.edu/projects/papi -->
<B><A HREF="http://icl.cs.utk.edu/projects/papi">http://icl.cs.utk.edu/projects/papi</A></B> </BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>PAPI Programmer&#146;s Manual</I></TD> <TD width=33% align=center>PAPI_perror (3)</TD> <TD align=right width=33%><I>October, 2000</I></TD> </TR></TABLE>
<FONT SIZE=-1>Generated on Wednesday, 27 Jun 2001 22:53:55 by a derivative of <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer</A> 1.06 from man3/PAPI_perror.3 using man macros.
<ADDRESS> Copyright &copy 2001 <a href='http://icl.cs.utk.edu/'>Innovative Computing Laboratory</a>.</ADDRESS>
</FONT>
</BODY></HTML>
