<HTML><HEAD>
<TITLE>Manual Page - PAPI_query_event(3)</TITLE>
<BODY background="fader-orange.gif" bgcolor="#FFFFFF" text="#000000" link="#660000" vlink="#003399" alink="#999933"><A NAME=top></A>
<!-- .\" $Id$ -->
<!-- .TH PAPI_query_event 3 "October, 2000" "PAPI Programmer's Manual" "PAPI" -->
<CENTER>
<H1><HR><I>PAPI Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>PAPI_query_event (3)</NOBR><HR></H1>
</CENTER>
<P>
<!-- .SH NAME -->
<A name=0>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
<!-- .nf -->
<PRE>
PAPI_query_event - query if PAPI event exists
PAPI_query_event_verbose - query details of a PAPI event
PAPI_query_all_events_verbose - acquire details of all PAPI events
<!-- .fi -->
</PRE>
<P>
<!-- .SH SYNOPSIS -->
</BLOCKQUOTE>
<A name=contents></A><H3>CONTENTS</H3></A>
<BLOCKQUOTE>
<A HREF=#1>Synopsis</A><BR>
<A HREF=#2>Description</A><BR>
<A HREF=#3>Return Values</A><BR>
<A HREF=#4>Errors</A><BR>
<A HREF=#5>Examples</A><BR>
<A HREF=#6>Author</A><BR>
<A HREF=#7>Bugs</A><BR>
<A HREF=#8>See Also</A><BR>
</BLOCKQUOTE>
<A name=9>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<!-- .B #include <papi.h> -->
<B>#include &lt;papi.h&gt;</B> <P>
<!-- .nf -->
<PRE>
<!-- .BI "int PAPI_query_event(int " EventCode ");" -->
<B>int PAPI_query_event(int </B><I>EventCode</I><B>);</B> 
<!-- .BI "int PAPI_query_event_verbose(int " EventCode ", PAPI_preset_info_t *" info ");" -->
<B>int PAPI_query_event_verbose(int </B><I>EventCode</I><B>, PAPI_preset_info_t *</B><I>info</I><B>);</B> 
<!-- .BI "const PAPI_preset_info_t* PAPI_query_all_events_verbose(\|);" -->
<B>const PAPI_preset_info_t* PAPI_query_all_events_verbose();</B> 
<!-- .fi -->
</PRE>
<P>
<!-- .SH DESCRIPTION -->
</BLOCKQUOTE>
<A name=2>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
<!-- .B "PAPI_query_event()" -->
<B>PAPI_query_event()</B> asks the hardware if the PAPI Preset event can be counted on this
architecture. If the event CAN be counted, the function returns
PAPI_OK.  If the event CANNOT be counted, the function returns an
error code.  On some platforms, this function also can be used to
check the syntax of a native event.
<P>
<!-- .B "PAPI_query_event_verbose()" -->
<B>PAPI_query_event_verbose()</B> asks the PAPI libraryfor a copy of an event descriptor. This
descriptor can then be used to investigate the details about the
event.
<P>
<!-- .B "PAPI_query_all_events_verbose()" -->
<B>PAPI_query_all_events_verbose()</B> asks the PAPI library to return a pointer to an array of event
descriptors. The number of objects in the array is
<!-- .B PAPI_MAX_PRESET_EVENTS -->
<B>PAPI_MAX_PRESET_EVENTS</B> and each object is a structure as returned by
PAPI_query_event_verbose().
<P>
<!-- .SH RETURN VALUES -->
</BLOCKQUOTE>
<A name=3>

     <H3>RETURN VALUES</H3>

</A>
<BLOCKQUOTE>
On success,
<!-- .BR PAPI_query_event " and " PAPI_query_event_verbose " returns" -->
<B>PAPI_query_event</B> and <B>PAPI_query_event_verbose</B> returns <!-- .IR "PAPI_OK" , -->
<I>PAPI_OK</I>, and on error, a non-zero error code is returned.
<P>
<!-- .B PAPI_query_all_events_verbose -->
<B>PAPI_query_all_events_verbose</B> returns a non NULL pointer on success.
<P>
<P>
<!-- .SH ERRORS -->
</BLOCKQUOTE>
<A name=4>

     <H3>ERRORS</H3>

</A>
<BLOCKQUOTE>
<!-- .TP -->
<TABLE cellpadding=3>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_EINVAL" -->
<B>PAPI_EINVAL</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
One or more of the arguments is invalid.
<!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_ENOMEM" -->
<B>PAPI_ENOMEM</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
Insufficient memory to complete the operation.
<!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_ENOEVST" -->
<B>PAPI_ENOEVST</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
The EventSet specified does not exist.
<!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_EISRUN" -->
<B>PAPI_EISRUN</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
The EventSet is currently counting events.
<!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_ECNFLCT" -->
<B>PAPI_ECNFLCT</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
The underlying counter hardware can not count this event and other events
in the EventSet simultaneously.
<!-- .TP -->
</TD></TR>
<TR valign=top><TD colspan=2>
<!-- .B "PAPI_NOEVNT" -->
<B>PAPI_NOEVNT</B> </TD></TR><TR valign=top><TD width=6%>&nbsp;</TD><TD>
The PAPI preset is not available on the underlying hardware.
<P>
<!-- .SH EXAMPLES -->
</TD></TR>
<TR></TR></TABLE></BLOCKQUOTE>
<A name=5>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
<!-- .LP -->
<P>
<!-- .nf -->
<PRE>
<!-- .if t .ft CW -->
<TT>int EventSet = PAPI_NULL;
unsigned int native = 0x0;
int retval,i;
PAPI_preset_info_t info;
PAPI_preset_info_t *infostructs;
<P>
/* Initialize the library */
<P>
retval = PAPI_library_init(PAPI_VER_CURRENT);
<P>
if (retval != PAPI_VER_CURRENT) {
  fprintf(stderr,"PAPI library init error!\n");
  exit(1); }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (PAPI_query_event(PAPI_TOT_INS) != PAPI_OK) {
  fprintf(stderr,"No instruction counter? How lame.\n");
  exit(1);
  }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (PAPI_query_event_verbose(PAPI_TOT_INS,&info) != PAPI_OK) {
  fprintf(stderr,"No instruction counter? How lame.\n");
  exit(1);
  }
<P>
if(info.avail)
  printf("This event is available on this hardware.\n");
<P>
if(info.flags & PAPI_DERIVED)
  printf("This event is a derived event on this hardware.\n");
<P>
retval=0;
infostructs=PAPI_query_all_events_verbose();
if(infostructs)
  for(i=0;i&lt;PAPI_MAX_PRESET_EVENTS;i++)
    if(infostructs[i].avail)
      retval += 1;
<P>
<!-- .if t .ft P -->
</TT><!-- .fi -->
</PRE>
<P>
<!-- .SH AUTHOR -->
</BLOCKQUOTE>
<A name=6>

     <H3>AUTHOR</H3>

</A>
<BLOCKQUOTE>
Philip J. Mucci &lt;<A HREF="mailto:mucci@cs.utk.edu">mucci@cs.utk.edu</A>&gt;
<P>
<!-- .SH BUGS -->
</BLOCKQUOTE>
<A name=7>

     <H3>BUGS</H3>

</A>
<BLOCKQUOTE>
These functions have no known bugs.
<P>
<!-- .SH SEE ALSO -->
</BLOCKQUOTE>
<A name=8>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<!-- .BR PAPI_preset "(3), " PAPI_native "(3), " -->
<A HREF="papi_preset.html">PAPI_preset (3)</A>, 
<A HREF="papi_native.html">PAPI_native (3)</A>, 
<!-- .BR PAPI_set_opt "(3), " PAPI_start "(3), " PAPI_rem_event "(3), "  -->
<A HREF="papi_set_opt.html">PAPI_set_opt (3)</A>, 
<A HREF="papi_start.html">PAPI_start (3)</A>, 
<A HREF="papi_rem_event.html">PAPI_rem_event (3)</A>, 
<!-- .BR PAPI_rem_events "(3), " PAPI_query "(3), " -->
<A HREF="papi_rem_events.html">PAPI_rem_events (3)</A>, 
<A HREF="papi_query.html">PAPI_query (3)</A>, 
<!-- .BR PAPI_cleanup_eventset "(3), " PAPI_destroy_eventset "(3), "  -->
<A HREF="papi_cleanup_eventset.html">PAPI_cleanup_eventset (3)</A>, 
<A HREF="papi_destroy_eventset.html">PAPI_destroy_eventset (3)</A>, 
The PAPI Web Site:
<!-- .B http://icl.cs.utk.edu/projects/papi -->
<B><A HREF="http://icl.cs.utk.edu/projects/papi">http://icl.cs.utk.edu/projects/papi</A></B> <P>
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>PAPI Programmer&#146;s Manual</I></TD> <TD width=33% align=center>PAPI_query_event (3)</TD> <TD align=right width=33%><I>October, 2000</I></TD> </TR></TABLE>
<FONT SIZE=-1>Generated on Wednesday, 27 Jun 2001 22:53:55 by a derivative of <A HREF="http://www.squarebox.co.uk/download/manServer.shtml">manServer</A> 1.06 from man3/PAPI_query_event.3 using man macros.
<ADDRESS> Copyright &copy 2001 <a href='http://icl.cs.utk.edu/'>Innovative Computing Laboratory</a>.</ADDRESS>
</FONT>
</BODY></HTML>
