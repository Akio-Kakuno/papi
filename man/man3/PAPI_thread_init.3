.\" $Id$
.TH PAPI_thread_init 3 "November, 2003" "PAPI Programmer's Reference" "PAPI"

.SH NAME
PAPI_thread_init \- initialize thread support in the PAPI library

.SH SYNOPSIS
.B C Interface
.nf
.B #include <papi.h>
.BI "int PAPI_thread_init (unsigned long int (*" handle ")());"
.fi
.B Fortran Interface
.nf
.B #include "fpapi.h"
.BI PAPIF_thread_init(C_INT\ FUNCTION\  handle,\  C_INT\  check )
.fi

.SH DESCRIPTION
.B "PAPI_thread_init"
initializes thread support in the PAPI library. Itshould be called 
.BR "only once" , 
just after 
.BR "PAPI_library_init" (3),
and before any other PAPI calls. Applications that make no use of threads 
do not need to call this routine.

.SH ARGUMENTS
.I "handle"
--  Pointer to a function that returns current thread ID.

.SH RETURN VALUES
On success, this function returns
.B "PAPI_OK."
 On error, a non-zero error code is returned.

.SH ERRORS
.TP
.B "PAPI_EINVAL"
One or more of the arguments is invalid.

.SH EXAMPLES
.I For Pthreads:
.nf         
.if t .ft CW
if (PAPI_thread_init(pthread_self) != PAPI_OK)
  handle_error(1);
.if t .ft P
.fi        
.LP
.I For OpenMP:
.nf         
.if t .ft CW
if (PAPI_thread_init(omp_get_thread_num) != PAPI_OK)
  handle_error(1);
.if t .ft P
.fi

.SH AUTHORS
The PAPI Team. See them at the PAPI Web Site: 
http://icl.cs.utk.edu/projects/papi

.SH BUGS
This function causes the application to exit if it is called more than once.

.SH SEE ALSO
.BR PAPI_library_init" (3), "
.BR PAPI_thread_id" (3), "
.BR PAPI_get_thr_specific" (3), "
.BR PAPI_set_thr_specific" (3)"

