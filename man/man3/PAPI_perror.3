.\" $Id$
.TH PAPI_perror 3 "October, 2000" "PAPI Programmer's Manual" "PAPI"

.SH NAME
PAPI_perror, PAPI_strerror \- convert PAPI error codes to strings

.SH SYNOPSIS
.B #include <papi.h>

.nf
.BI "int PAPI_perror(int " code ", char *" destination ", int " length ");"
.BI "char *PAPI_strerror(int " code ");"
.fi

.SH DESCRIPTION
.B PAPI_perror()
fills the string 
.I destination 
with the error message corresponding to the error code
.IR code .
The function copies length worth of the error description string
corresponding to code into destination. The resulting string is always
null terminated. If length is 0, then the string is printed on stderr.
The return value is an integer that indicates whether the call
succeeded (PAPI_OK) or failed (not PAPI_OK).
.LP
.I code 
-- the error code to interpret
.LP
.I *destination 
-- "the error message in quotes"
.LP
.I length 
-- either 0 or strlen(destination)
.LP
.B PAPI_strerror()
returns a pointer to the error message corresponding to the error code
.IR code .
If the call fails the function returns the NULL pointer.
.LP
.I code 
-- an error code to interpret

.SH RETURN VALUES
On success 
.B PAPI_perror()
returns
.I "PAPI_OK."
.LP
On success 
.B PAPI_strerror()
returns a non-NULL pointer.

.SH ERRORS
.TP
.B "PAPI_EINVAL"
One or more of the arguments to 
.B PAPI_perror() 
is invalid.

.SH EXAMPLE
.nf
.if t .ft CW
int EventSet = PAPI_NULL;
int native = 0x0;
char error_str[PAPI_MAX_STR_LEN];
	
if ((retval = PAPI_create_eventset(&EventSet)) != PAPI_OK)
  {
     fprintf(stderr, "PAPI error %d: %s\\n",retval,PAPI_strerror(retval));
     exit(1);
  }	

/* Add Total Instructions Executed to our EventSet */

if ((retval = PAPI_add_event(&EventSet, PAPI_TOT_INS)) != PAPI_OK)
  {
     PAPI_perror(retval,error_str,PAPI_MAX_STR_LEN);
     fprintf(stderr,"PAPI_error %d: %s\\n",retval,error_str);
     exit(1);
  }

/* Add native event (0xc1 on hardware counter 1) */

native = (0xc1 << 8) | 1;
if ((retval = PAPI_add_event(&EventSet, native)) != PAPI_OK)
  {
     /* Dump error string directly to stderr. */

      PAPI_perror(retval,NULL,NULL);
     exit(1);
  }

/* Start counting */

if ((retval = PAPI_start(EventSet)) != PAPI_OK)
  handle_error(retval);
.if t .ft P
.fi

.SH AUTHOR
Philip J. Mucci <mucci@cs.utk.edu>

.SH BUGS
This function has no known bugs.

.SH SEE ALSO
.BR PAPI_set_debug "(3), "
.BR PAPI_set_opt "(3), " PAPI_get_opt "(3), " PAPI_shutdown "(3), " 
The PAPI Web Site: 
.B http://icl.cs.utk.edu/projects/papi
