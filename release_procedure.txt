Release Procedure for PAPI  January 13, 2010

Below is a step-wise procedure for making a PAPI release.
This is a living document and may not be totally current or accurate.
It is an attempt to capture current practice in making a PAPI release.
Please update it as appropriate.

One way to use this procedure is to print a copy and check off
the lines as they are completed to avoid confusion.
================================================================================
__ 1. Notify developers that a release is imminent and the repository should be
	considered frozen.

__ 2. Update any documentation that may have changed. Pay particular attention
	to INSTALL.txt.

__ 3. Check/Change the version number in: papi.spec, papi.h, configure.in, Makefile.in;
	and commit to cvs if needed.

__ 4. If configure.in is changed, run autoconf (2.61) 
	and commit the resulting configure.

__ 5. Create a ChangeLog for the current release. 
	- One handy way to do this is to use the python script that comes with
	WinCVS:
	  Macros->CVS->Build ChangeLog (advanced).
	Use the -r<branch>: command to log commit messages from the previous 
	branch point to the present.

__ 6. Scan the ChangeLog to remove extraneous fluff, like perfctr imports.

__ 7. Modfy RELEASENOTES.txt to summarize the major changes listed in the log.

__ 8. Add ChangeLogXYZ.txt to cvs and commit both ChangeLogXYZ.txt and 
	RELEASENOTES.txt.

__ 9. Tag cvs: papi-X-Y-Z-t.

__ 10. If this is not an incremental release, also branch cvs: papi-X-Y-Z-b.

__ 11. Export the tag to a clean working directory:
	> cvs export -r <tag> <module> ex:
	> cvs export -r papi-3-7-2-t papi

__ 12. Delete any unneccessary files or directories
		particularly .doc and .pdf files in the /doc directory

__ 13. Rename the directory from papi to papi-X.Y.Z

__ 14. tar the directory:
	> tar -cvf papi-X.Y.Z.tar papi-X.Y.Z

__ 15. zip the tarball:
	gzip papi-X.Y.Z.tar

__ 16. Copy the tarball to icl:/sw/www/icl/projects/papi/downloads

__ 17. Check permissions on the tarball. 664 is good. 

__ 18. Create a link with supporting text on the PAPI software web page.

__ 19. Create a News item on the PAPI Web page.

__ 20. Email the papi developer and discussion lists with an announcement.

__ 21. Post the announcement on the PAPI User Forum.

================================================================================

Patch Procedure for PAPI  January 29, 2010

Below is a step-wise procedure for making a PAPI patch.

One way to use this procedure is to print a copy and check off
the lines as they are completed to avoid confusion.
================================================================================
__ 0. Make sure that the version of cvs that you are using to create the patch is the same 
        as the version used to create the tarball to be patched. Versions before 1.12.9 use
        backslashes in date strings; versions after that use hyphens. The two don't mix!

__ 1. Export the tagged version of PAPI that you want to patch against:
	> cvs export -r <tag> <module> ex:
	> cvs export -r papi-4-0-0-t papi
	Exporting eliminates the cvs directories that will change between versions.

__ 2. Rename the tagged directory:
	mv papi papi400t

__ 3. Export the branch of PAPI that you want to patch with:
	> cvs export -r <branch> <module> ex:
	> cvs export -r papi-4-0-0-b papi

__ 4. Rename the branch directory:
	mv papi papi400b

__ 5. Diff the two directories:
	> diff -rupwBN <original> <new> > <output.diff> ex:
	> diff -rupwBN papi 400t papi400b > papi400patch1.diff
	
	The flags for diff are:
	-r: recursive
	-u: unified
	-p: show function names
	-w: ignore all white space
	-B: ignore changes whose lines are blank
	-N: treat absent files as empty

__ 6. Copy the diff file to icl:/sw/www/icl/projects/papi/downloads/patches

__ 7. Check permissions on the diff. 644 is good. 

__ 8. Create a link with supporting text on the PAPI software web page.

__ 9. Create a News item on the PAPI Web page.

__ 10. Email the papi discussion list with an announcement.





