<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.77 [en] (Windows NT 5.0; U) [Netscape]">
   <meta name="Author" content="Dan Terpstra">
   <title>PAPI MatLab Support Page</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#660000" vlink="#003399" alink="#999933" background="fader-blue.gif">

<center>
<h1>
<i>PAPI MatLab Support Page</i>
<hr></h1></center>

<h2>
Mex Functions
<hr WIDTH="100%"></h2>

<blockquote>
<h3>
NAME</h3>
</blockquote>

<blockquote>
<blockquote><a NAME="PAPI_start_flops"></a><b>PAPI_start_flops </b>- Initialize
PAPI library, reset counters to zero and begin counting.</blockquote>

<h3>
DESCRIPTION</h3>

<blockquote>The first call to PAPI_start_flops will initialize PAPI, set
up the counters to monitor floating point instructions and total cpu cycles,
and start the counters. Subsequent calls will reset the counter values
to zero and resume counting. Calling this function is never required, since
PAPI_count_flops will initialize PAPI transparently if that has not been
done. The purpose of this function is to provide a way to reset the counters
to zero between tests or between subsequent runs of the same test.</blockquote>

<h3>
PARAMETERS</h3>

<blockquote><i>none</i></blockquote>
</blockquote>

<hr WIDTH="100%">
<blockquote>
<h3>
NAME</h3>
</blockquote>

<blockquote>
<blockquote><b>[ops, mflops] =&nbsp;<a NAME="PAPI_count_flops"></a>PAPI_count_flops</b>
- Return accumulated floating point instructions and MFLOPS since the last
call to PAPI_start_flops or PAPI_count_flops.</blockquote>

<h3>
DESCRIPTION</h3>

<blockquote>Each call to PAPI_count_flops will read the counters and return
total floating point instructions executed since the previous call to PAPI_start_flops,
and Mflops/s since the previous call to either PAPI_start_flops or PAPI_count_flops.</blockquote>

<h3>
PARAMETERS</h3>

<blockquote>
<h3>
Inputs</h3>
<i>none</i>
<h3>
Outputs</h3>
<i>ops</i> -- total floating point instructions since the latest call to
PAPI_start_flops or the first call to PAPI_count_flops.
<p><i>mflops</i> -- Mflops/s achieved since the latest PAPI_flops() call.</blockquote>
</blockquote>

<center>
<h1>

<hr></h1></center>

<h2>
Example M-Files
<hr WIDTH="100%"></h2>

<blockquote>
<h3>
NAME</h3>

<blockquote><a NAME="PAPI_InnerProduct"></a><b>PAPI_InnerProduct.m</b></blockquote>

<h3>
DESCRIPTION</h3>

<blockquote>Computes the product of a scalar and a vector of size n = 50
to 500 in steps of 50. Displays the observed number of floating point operations
as compared to the theoretically predicted number. Theory predicts ops
= 2*n. The results provide an indication of the overhead incurred by MatLab,
and the Mflops acheived for each computation.</blockquote>

<h3>
SOURCE</h3>

<blockquote><tt>fprintf(1,'\nPAPI Inner Product Test');</tt>
<br><tt>fprintf(1,'\n%12s %12s %12s %12s %12s %12s\n', 'n', 'ops', '2n',
'difference', '% error', 'mflops')</tt>
<br><tt>i=0;</tt>
<br><tt>for n=50:50:500,</tt>
<br><tt>&nbsp;&nbsp;&nbsp; a=rand(1,n);x=rand(n,1);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; i=i+1;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; PAPI_start_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; c=a*x;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; [count(i),mflops]=PAPI_count_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; fprintf(1,'%12d %12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n,count(i)
- 2*n, (1.0 - ((2*n) / (count(i)))) * 100,mflops)</tt>
<br><tt>end</tt></blockquote>

<h3>
RESULTS</h3>

<blockquote>The following were obtained on an 850 MHz Pentium III running
Windows 2000 and MatLab 6.1. Your milage may vary.
<p><tt>>> PAPI_innerProduct</tt>
<p><tt>PAPI Inner Product Test</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2n&nbsp;&nbsp;
difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
mflops</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1.5</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
5.2</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
8.6</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
431&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
11</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
535&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
639&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
16</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 350&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
743&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 700&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
18</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
851&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
51&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
22</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
955&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
24</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1059&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
25</tt>
<br><tt>>></tt></blockquote>
</blockquote>

<h3>

<hr WIDTH="100%"></h3>

<blockquote>
<h3>
NAME</h3>

<blockquote><a NAME="PAPI_VectorMatrix"></a><b>PAPI_VectorMatrix.m</b></blockquote>

<blockquote>
<h3>
DESCRIPTION</h3>

<blockquote>Computes the product of a square matrix and a vector of size
n = 50 to 500 in steps of 50. Displays the observed number of floating
point operations as compared to the theoretically predicted number. Theory
predicts ops = 2*n^2. The results provide an indication of the overhead
incurred by MatLab, and the Mflops acheived for each computation.</blockquote>

<h3>
SOURCE</h3>

<blockquote><tt>fprintf(1,'\nPAPI Matrix Vector Multiply Test');</tt>
<br><tt>fprintf(1,'\n%12s %12s %12s %12s %12s %12s\n', 'n', 'ops', '2n^2',
'difference', '% error', 'mflops')</tt>
<br><tt>i=0;</tt>
<br><tt>for n=50:50:500,</tt>
<br><tt>&nbsp;&nbsp;&nbsp; a=rand(n);x=rand(n,1);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; i=i+1;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; PAPI_start_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; b=a*x;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; [count(i),mflops]=PAPI_count_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; fprintf(1,'%12d %12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n^2,count(i)
- 2*n^2, (1.0 - ((2*n^2) / (count(i)))) * 100,mflops)</tt>
<br><tt>end</tt></blockquote>

<h3>
RESULTS</h3>

<blockquote>The following were obtained on an 850 MHz Pentium III running
Windows 2000 and MatLab 6.1. Your milage may vary.
<p><tt>>> PAPI_MatrixVector</tt><tt></tt>
<p><tt>PAPI Matrix Vector Multiply Test</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2n^2&nbsp;&nbsp; difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
% error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mflops</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
5220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
34</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
20625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;
1.6e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
45223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 45000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
59</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
80317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 80000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
31</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
125423&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 125000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
423&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
41</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
180541&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 180000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
541&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
53</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 350&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
245671&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 245000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
671&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
53</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
320467&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 320000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
467&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
49</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
405583&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 405000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
583&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
39</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
500711&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
711&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
37</tt>
<br><tt>>></tt></blockquote>
</blockquote>
</blockquote>

<h3>

<hr WIDTH="100%"></h3>

<blockquote>
<h3>
NAME</h3>

<blockquote><a NAME="PAPI_MatrixMatrix"></a><b>PAPI_MatrixMatrix.m</b></blockquote>

<h3>
DESCRIPTION</h3>

<blockquote>Computes the product of two square matrices of size n = 50
to 500 in steps of 50. Displays the observed number of floating point operations
as compared to the theoretically predicted number. Theory predicts ops
= 2*n^3. The results provide an indication of the overhead incurred by
MatLab, and the Mflops acheived for each computation.</blockquote>

<h3>
SOURCE</h3>

<blockquote><tt>fprintf(1,'\nPAPI Matrix Matrix Multiply Test');</tt>
<br><tt>fprintf(1,'\n%12s %12s %12s %12s %12s %12s\n', 'n', 'ops', '2n^3',
'difference', '% error', 'mflops')</tt>
<br><tt>i=0;</tt>
<br><tt>for n=50:50:500,</tt>
<br><tt>&nbsp;&nbsp;&nbsp; a=rand(n);b=rand(n);c=rand(n);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; i=i+1;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; PAPI_start_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; c=c+a*b;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; [count(i),mflops]=PAPI_count_flops;</tt>
<br><tt>&nbsp;&nbsp;&nbsp; fprintf(1,'%12d %12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n^3,count(i)
- 2*n^3, (1.0 - ((2*n^3) / (count(i)))) * 100,mflops)</tt>
<br><tt>end</tt></blockquote>

<h3>
RESULTS</h3>

<blockquote>The following were obtained on an 850 MHz Pentium III running
Windows 2000 and MatLab 6.1. Your milage may vary.
<p><tt>>> PAPI_MatrixMatrix</tt>
<p><tt>PAPI Matrix Matrix Multiply Test</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2n^3&nbsp;&nbsp; difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
% error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mflops</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
258660&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 250000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
8660&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.3&nbsp;&nbsp;&nbsp;&nbsp;
1.3e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2403328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
403328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 17&nbsp;&nbsp;&nbsp;&nbsp;
3.9e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
9436233&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6750000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2686233&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 28&nbsp;&nbsp;&nbsp;&nbsp;
3.7e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 200&nbsp;&nbsp;&nbsp;&nbsp;
25939155&nbsp;&nbsp;&nbsp;&nbsp; 16000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
9939155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 38&nbsp;&nbsp;&nbsp;&nbsp;
4.1e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 250&nbsp;&nbsp;&nbsp;&nbsp;
57975507&nbsp;&nbsp;&nbsp;&nbsp; 31250000&nbsp;&nbsp;&nbsp;&nbsp; 26725507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
46&nbsp;&nbsp;&nbsp;&nbsp; 4.4e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 300&nbsp;&nbsp;&nbsp;
113108773&nbsp;&nbsp;&nbsp;&nbsp; 54000000&nbsp;&nbsp;&nbsp;&nbsp; 59108773&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
52&nbsp;&nbsp;&nbsp;&nbsp; 4.4e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 350&nbsp;&nbsp;&nbsp;
200403517&nbsp;&nbsp;&nbsp;&nbsp; 85750000&nbsp;&nbsp;&nbsp; 114653517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
57&nbsp;&nbsp;&nbsp;&nbsp; 4.5e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp;
330403850&nbsp;&nbsp;&nbsp; 128000000&nbsp;&nbsp;&nbsp; 202403850&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
61&nbsp;&nbsp;&nbsp;&nbsp; 4.5e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 450&nbsp;&nbsp;&nbsp;
515186856&nbsp;&nbsp;&nbsp; 182250000&nbsp;&nbsp;&nbsp; 332936856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
65&nbsp;&nbsp;&nbsp;&nbsp; 4.5e+002</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500&nbsp;&nbsp;&nbsp;
768315108&nbsp;&nbsp;&nbsp; 250000000&nbsp;&nbsp;&nbsp; 518315108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
67&nbsp;&nbsp;&nbsp;&nbsp; 4.6e+002</tt>
<br><tt>>></tt></blockquote>
</blockquote>

<hr>
<address>
<font size=-1>Copyright &copy; 2001 <a href="http://icl.cs.utk.edu/">Innovative
Computing Laboratory</a>.</font></address>

</body>
</html>
