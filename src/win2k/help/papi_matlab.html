<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Untitled Document</title>
         
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
     
  <style type="text/css">
<!--
p
{font-family: Verdana, Helvetica, Arial, sans-serif}

.style
{font-family: Verdana, Helvetica, Arial, sans-serif}

td.navBar A:link
{color: #ddd8d2;
font-weight: bold;
text-decoration: none}

td.navBar A:visited
{color: #ccc9c5;
font-weight: bold;
text-decoration: none}

td.navBar A:hover
{color: #ffffff}

.navBar
{color: #77797c;
font-family: Verdana, Helvetica, Arial, sans-serif;
font-size:  11px;
text-transform: uppercase}

a:visited
{color: #50525f}

a:link
{color: #8b3409}

a:hover
{color: #660000}

a:active
{background-color: #b1afad}

.footerNote
{background-color: #ffffff;
background-image: url(images/line.gif);
background-position: right top;
background-repeat: repeat-x;
color: #77797c;
font-family: Verdana, Helvetica, Arial, sans-serif;
font-size:  10px}

BODY
{font-family: Verdana, Helvetica, Arial, sans-serif}
-->
</style>    
  <script language="JavaScript">
<!--
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.0
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && document.getElementById) x=document.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>
</head>
 <body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
   E
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tbody>
     <tr>
  <td valign="Top" height="75">        
      <table width="100%" border="0" cellspacing="0" cellpadding="0" height="75">
  <tbody>
           <tr>
  <td background="images/menubg95.jpg" height="75">              
            <table width="760" border="0" cellspacing="0" cellpadding="0" align="Center" height="75">
  <tbody>
                 <tr valign="Bottom">
  <td width="760" align="Center" height="50" colspan="2"> <img src="images/headertop.jpg" width="760" height="50">
                   </td>
  </tr>
  <tr>
  <td height="10" align="Center" valign="Top" bgcolor="#333333" width="135">
  <img src="images/logoleft.jpg" width="135" height="25" vspace="0" hspace="0" align="Left">
  </td>
  <td class="navBar" height="25" align="Center" valign="Middle" bgcolor="#333333" nowrap="" width="625" background="images/menubg.jpg">
                     
                  <center> <a href="http://icl.cs.utk.edu/papi/"> PAPI HOME
                   </a>
  </center>
  </td>
  </tr>
  <tr>
  <td height="10" align="Center" valign="Top" bgcolor="#ffffff" width="135">
  <img src="images/logobottom.jpg" width="135" height="20" vspace="0" hspace="0" align="Left">
  </td>
  <td class="navBar" height="10" align="Center" valign="Bottom" bgcolor="#ffffff" width="625">
  <img src="images/white.jpg" width="625" height="20" vspace="0" hspace="0" align="Left">
  </td>
  </tr>
                 
              </tbody>             
            </table>
  </td>
  </tr>
           
        </tbody>       
      </table>
  </td>
  </tr>
  <tr>
  <td valign="Top">        
      <table width="760" border="0" cellspacing="0" cellpadding="0" align="Center" class="style">
  <tbody>
           <tr>
  <td class="STYLE">             
            <center>             
            <h1><i>PAPI MatLab Support Page</i>             
            <hr></h1>
             </center>
             
            <h2> Mex Functions              
            <hr width="100%"></h2>
             
            <blockquote>
              <h3>               <a name="PAPI_start_flops"></a>
NAME</h3>
               </blockquote>
               
              <blockquote>                 
                <blockquote><b>PAPI_start_flops </b>- Initialize PAPI library,
reset counters to zero and begin counting.</blockquote>
                   
                  <h3> DESCRIPTION</h3>
                   
                  <blockquote>The first call to PAPI_start_flops will initialize 
PAPI, set up the counters to monitor floating point instructions and total 
cpu cycles, and start the counters. Subsequent calls will reset the counter 
values to zero and resume counting. Calling this function is never required, 
since PAPI_count_flops will initialize PAPI transparently if that has not 
been done. The purpose of this function is to provide a way to reset the counters
to zero between tests or between subsequent runs of the same test.</blockquote>
                     
                    <h3> PARAMETERS</h3>
                     
                    <blockquote><i>none</i></blockquote>
                       </blockquote>
                       
                      <hr width="100%">                       
                      <blockquote>
                        <h3>                         </h3>
                        <h3><b><a name="PAPI_count_flops"></a>
                        </b>NAME</h3>
                        <h3>                         </h3>
                        </blockquote>
                         
                        <blockquote>                           
                          <blockquote><b>[ops, mflops] =&nbsp; PAPI_count_flops</b>
 - Return accumulated floating point instructions and MFLOPS since the last
call to PAPI_start_flops or PAPI_count_flops.</blockquote>
                             
                            <h3> DESCRIPTION</h3>
                             
                            <blockquote>Each call to PAPI_count_flops will 
read the counters and return total floating point instructions executed since 
the previous call to PAPI_start_flops, and Mflops/s since the previous call 
to either PAPI_start_flops or PAPI_count_flops.</blockquote>
                               
                              <h3> PARAMETERS</h3>
                               
                              <blockquote>                              
  
                                <h3> Inputs</h3>
                                 <i>none</i>                            
    
                                <h3> Outputs</h3>
                                 <i>ops</i> -- total floating point instructions 
since the latest call to PAPI_start_flops or the first call to PAPI_count_flops.
                                 
                                <p><i>mflops</i> -- Mflops/s achieved since 
the latest PAPI_flops() call.</p>
                                 </blockquote>
                                 </blockquote>
                                 
                                <center>                                
                                <h1>                                 
                                <hr></h1>
                                 </center>
                                 
                                <h2> Example M-Files                    
             
                                <hr width="100%"></h2>
                                 
                                <blockquote>                            
      
                                  <h3> <a name="PAPI_InnerProduct"></a>
NAME</h3>
                                   
                                  <blockquote><b>PAPI_InnerProduct.m</b></blockquote>
                                     
                                    <h3> DESCRIPTION</h3>
                                     
                                    <blockquote>Computes the product of a 
scalar and a vector of size n = 50 to 500 in steps of 50. Displays the observed 
number of floating point operations as compared to the theoretically predicted 
number. Theory predicts ops = 2*n. The results provide an indication of the 
overhead incurred by MatLab, and the Mflops acheived for each computation.</blockquote>
                                       
                                      <h3> SOURCE</h3>
                                       
                                      <blockquote><tt>fprintf(1,'\nPAPI Inner 
Product Test');</tt><br>
                                         <tt>fprintf(1,'\n%12s %12s %12s
%12s %12s %12s\n', 'n', 'ops', '2n', 'difference', '% error', 'mflops')</tt><br>
                                         <tt>i=0;</tt><br>
                                         <tt>for n=50:50:500,</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; a=rand(1,n);x=rand(n,1);</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; i=i+1;</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; PAPI_start_flops;</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; c=a*x;</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; [count(i),mflops]=PAPI_count_flops;</tt><br>
                                         <tt>&nbsp;&nbsp;&nbsp; fprintf(1,'%12d 
%12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n,count(i) - 2*n, (1.0 - ((2*n) 
/ (count(i)))) * 100,mflops)</tt><br>
                                         <tt>end</tt></blockquote>
                                         
                                        <h3> RESULTS</h3>
                                         
                                        <blockquote>The following were obtained 
on an 850 MHz Pentium III running Windows 2000 and MatLab 6.1. Your milage 
may vary. <br>
                                           </blockquote>
                                           <tt>&gt;&gt; PAPI_innerProduct</tt><br>
                                           <tt>PAPI Inner Product Test</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2n&nbsp;&nbsp; difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 mflops</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 19&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.5</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 23&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.2</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 327&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
8.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8.6</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 431&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 11</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 535&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 35&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
6.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 639&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
350&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 743&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
700&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 43&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 18</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 851&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 51&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 22</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 955&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 55&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 24</tt><br>
                                           <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1059&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</tt><br>
                                           <tt>&gt;&gt;</tt></blockquote>
                                           
                                          <h3>                          
                
                                          <hr width="100%"></h3>
                                           
                                          <blockquote>                  
                          
                                            <h3><a name="PAPI_VectorMatrix"></a>
NAME</h3>
                                             
                                            <blockquote><b>PAPI_VectorMatrix.m</b></blockquote>
                                               
                                              <blockquote>              
                                  
                                                <h3> DESCRIPTION</h3>
                                                 
                                                <blockquote>Computes the product
of a square matrix and a vector of size n = 50 to 500 in steps of 50. Displays
the observed number of floating point operations as compared to the theoretically
predicted number. Theory predicts ops = 2*n^2. The results provide an indication
of the overhead incurred by MatLab, and the Mflops acheived for each computation.</blockquote>
                                                   
                                                  <h3> SOURCE</h3>
                                                   
                                                  <blockquote><tt>fprintf(1,'\nPAPI 
Matrix Vector Multiply Test');</tt><br>
                                                     <tt>fprintf(1,'\n%12s 
%12s %12s %12s %12s %12s\n', 'n', 'ops', '2n^2', 'difference', '% error', 
'mflops')</tt><br>
                                                     <tt>i=0;</tt><br>
                                                     <tt>for n=50:50:500,</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
a=rand(n);x=rand(n,1);</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
i=i+1;</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
PAPI_start_flops;</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
b=a*x;</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
[count(i),mflops]=PAPI_count_flops;</tt><br>
                                                     <tt>&nbsp;&nbsp;&nbsp; 
fprintf(1,'%12d %12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n^2,count(i)
 - 2*n^2, (1.0 - ((2*n^2) / (count(i)))) * 100,mflops)</tt><br>
                                                     <tt>end</tt></blockquote>
                                                     
                                                    <h3> RESULTS</h3>
                                                     
                                                    <blockquote>The following 
were obtained on an 850 MHz Pentium III running Windows 2000 and MatLab 6.1. 
Your milage may vary. </blockquote>
                                                       </blockquote>
                                                       
                                                      <p><tt>&gt;&gt; PAPI_MatrixVector</tt></p>
                                                       
                                                      <p><tt>PAPI Matrix Vector
Multiply Test</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2n^2&nbsp;&nbsp; difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mflops</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
4.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 34</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
20000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 625&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3&nbsp;&nbsp;&nbsp;&nbsp; 1.6e+002</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 45223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
45000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 59</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 80317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
80000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 317&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.39&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 31</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
250&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 125423&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
125000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 423&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.34&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 41</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 180541&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
180000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 541&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 53</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
350&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 245671&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
245000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 671&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.27&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 53</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 320467&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
320000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 467&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 49</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
450&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 405583&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
405000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 583&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 39</tt><br>
                                                       <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 500711&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
500000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 711&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.14&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 37</tt><br>
                                                       <tt>&gt;&gt;</tt></p>
                                                       </blockquote>
                                                       
                                                      <h3>              
                                        
                                                      <hr width="100%"></h3>
                                                       
                                                      <blockquote>      
                                                  
                                                        <h3><a name="PAPI_MatrixMatrix"></a>
NAME</h3>
                                                         
                                                        <blockquote><b>PAPI_MatrixMatrix.m</b></blockquote>
                                                           
                                                          <h3> DESCRIPTION</h3>
                                                           
                                                          <blockquote>Computes 
the product of two square matrices of size n = 50 to 500 in steps of 50. Displays
the observed number of floating point operations as compared to the theoretically
predicted number. Theory predicts ops = 2*n^3. MatLab uses an ATLAS optimized
agorithm for peak performance on matrix-matrix multiplies. The bulk of the
error indicated below is due to that algorithm, which increases floating
point performance while adding floating point operations to the theoretically
predicted number.</blockquote>
                                                             
                                                            <h3> SOURCE</h3>
                                                             
                                                            <blockquote><tt>
 fprintf(1,'\nPAPI Matrix Matrix Multiply Test');</tt><br>
                                                               <tt>fprintf(1,'\n%12s 
%12s %12s %12s %12s %12s\n', 'n', 'ops', '2n^3', 'difference', '% error', 
'mflops')</tt><br>
                                                               <tt>i=0;</tt><br>
                                                               <tt>for n=50:50:500,</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
a=rand(n);b=rand(n);c=rand(n);</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
i=i+1;</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
PAPI_start_flops;</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
c=c+a*b;</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
[count(i),mflops]=PAPI_count_flops;</tt><br>
                                                               <tt>&nbsp;&nbsp;&nbsp; 
fprintf(1,'%12d %12d %12d %12d %12.2g %12.2g\n',n,count(i),2*n^3,count(i)
 - 2*n^3, (1.0 - ((2*n^3) / (count(i)))) * 100,mflops)</tt><br>
                                                               <tt>end</tt></blockquote>
                                                               
                                                              <h3> RESULTS</h3>
                                                               
                                                              <blockquote>
 The following were obtained on an 850 MHz Pentium III running Windows 2000 
and MatLab 6.1. Your milage may vary. </blockquote>
                                                                 
                                                                <p><tt>&gt;&gt; 
PAPI_MatrixMatrix</tt></p>
                                                                 
                                                                <p><tt>PAPI 
Matrix Matrix Multiply Test</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ops&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
2n^3&nbsp;&nbsp; difference&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % error&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mflops</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 258660&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
250000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8660&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
3.3&nbsp;&nbsp;&nbsp;&nbsp; 1.3e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2403328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 403328&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 17&nbsp;&nbsp;&nbsp;&nbsp;
 3.9e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9436233&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6750000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 2686233&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 28&nbsp;&nbsp;&nbsp;&nbsp;
 3.7e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
200&nbsp;&nbsp;&nbsp;&nbsp; 25939155&nbsp;&nbsp;&nbsp;&nbsp; 16000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 9939155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 38&nbsp;&nbsp;&nbsp;&nbsp;
 4.1e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
250&nbsp;&nbsp;&nbsp;&nbsp; 57975507&nbsp;&nbsp;&nbsp;&nbsp; 31250000&nbsp;&nbsp;&nbsp;&nbsp; 
26725507&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 46&nbsp;&nbsp;&nbsp;&nbsp; 
4.4e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
300&nbsp;&nbsp;&nbsp; 113108773&nbsp;&nbsp;&nbsp;&nbsp; 54000000&nbsp;&nbsp;&nbsp;&nbsp; 
59108773&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 52&nbsp;&nbsp;&nbsp;&nbsp; 
4.4e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
350&nbsp;&nbsp;&nbsp; 200403517&nbsp;&nbsp;&nbsp;&nbsp; 85750000&nbsp;&nbsp;&nbsp; 
114653517&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 57&nbsp;&nbsp;&nbsp;&nbsp; 
4.5e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
400&nbsp;&nbsp;&nbsp; 330403850&nbsp;&nbsp;&nbsp; 128000000&nbsp;&nbsp;&nbsp; 
202403850&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 61&nbsp;&nbsp;&nbsp;&nbsp; 
4.5e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
450&nbsp;&nbsp;&nbsp; 515186856&nbsp;&nbsp;&nbsp; 182250000&nbsp;&nbsp;&nbsp; 
332936856&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 65&nbsp;&nbsp;&nbsp;&nbsp; 
4.5e+002</tt><br>
                                                                 <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
500&nbsp;&nbsp;&nbsp; 768315108&nbsp;&nbsp;&nbsp; 250000000&nbsp;&nbsp;&nbsp; 
518315108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 67&nbsp;&nbsp;&nbsp;&nbsp; 
4.6e+002</tt><br>
                                                                 <tt>&gt;&gt;</tt></p>
                                                                 </blockquote>
   </td>
  </tr>
                                                               
                                                            </tbody>    
                                                      
                                                          </table>
  </td>
  </tr>
  <tr>
  <td valign="Top">                                                     
      
                                                          <table width="760" border="0" cellspacing="0" cellpadding="5" align="Center">
  <tbody>
                                                               <tr>
  <td>                                                                  
                                                                <hr size="1">
  </td>
  </tr>
  <tr>
  <td height="92">                                                      
           
                                                                <table width="760" border="0" cellspacing="0" cellpadding="0" align="Center" vspace="0" hspace="0">
  <tbody>
                                                                     <tr valign="Top">
  <td align="Left" background="images/stripes2.jpg" rowspan="2">&nbsp;  
                                                                      </td>
  <td align="Right" height="39" background="images/stripes2.jpg" width="280">
  <img src="images/trans.gif" width="280" height="63" vspace="0" hspace="0">
  </td>
  <td align="Left" height="63" width="200" background="images/spinbg.jpg">
  <a href="http://icl.cs.utk.edu/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image10','','images/spinlogo.gif',1)">
  <img name="Image10" border="0" src="images/stable.gif" width="200" height="63" hspace="0" vspace="0" align="Left" alt="Innovative Computing Laboratory">
  </a>
  </td>
  <td align="Left" height="0" rowspan="2" valign="Top" width="140">     
                                                                  
                                                                      <div align="Left">
  <img src="images/trans.gif" width="140" height="75" border="0" align="Left" vspace="0" hspace="0">
  </div>
  </td>
  <td align="Left" rowspan="2" valign="Top" width="140"> <img src="images/rd.jpg" width="140" height="75" border="0" align="Right" vspace="0" hspace="0" alt="2001 R&amp;D Winner">
  </td>
  <td align="Right" rowspan="3" valign="Top" bgcolor="#ffffff"><br>
 &nbsp;   </td>
  </tr>
  <tr valign="Top">
  <td align="Center" height="22" rowspan="2" valign="Top"> <span class="FOOTERNOTE">
  Contact PAPI:  <a href="mailto:papi@cs.utk.edu"> papi@cs.utk.edu</a>
  </span> </td>
  <td align="Center" height="11" width="200"> <a href="http://www.cs.utk.edu/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image11','','images/cssigon.gif',1)">
  <img name="Image11" border="0" src="images/cssigoff.gif" width="200" height="11" align="Left" hspace="0" vspace="0" alt="Computer Science Department">
  </a>
  </td>
  </tr>
  <tr valign="Top">
  <td align="Left">&nbsp;   </td>
  <td align="Center" height="11" width="200" valign="Top"> <a href="http://www.utk.edu/" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Image12','','images/utsigon.gif',1)">
  <img name="Image12" border="0" src="images/utsigoff.gif" width="200" height="11" vspace="0" hspace="0" align="Left" alt="University of Tennessee">
  </a>
  </td>
  <td align="Left" height="0" colspan="2" valign="Top">&nbsp;   </td>
  </tr>
                                                                     
                                                                  </tbody>
                                                                 
                                                                </table>
  </td>
  </tr>
                                                               
                                                            </tbody>    
                                                      
                                                          </table>
  </td>
  </tr>
  <tr>
  <td valign="Top">&nbsp;   </td>
  </tr>
                                                         
                                                      </tbody>          
                                          
                                                    </table>
                                                       
                                                    </body>
                                                    </html>
